<!-- Modal de historial de versiones -->
<div class="modal-overlay" x-show="$store.ui.isModalOpen('versionHistory')" 
     x-transition:enter="transition-opacity ease-out duration-300"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition-opacity ease-in duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     @click="$store.ui.closeModal('versionHistory')">
    <div class="modal" @click.stop style="width: 90%; max-width: 900px; height: 80vh; max-height: 700px; overflow: hidden;">
        <div class="modal-header">
            <h2 x-text="$store.i18n.t('versionControl.history')"></h2>
            <button class="modal-close" @click="$store.ui.closeModal('versionHistory')">
                <i data-lucide="x"></i>
            </button>
        </div>
        
        <div class="modal-body" style="overflow: auto; flex: 1;">
            <div class="version-control-panel">
                <div class="version-stats">
                    <div class="stat-item">
                        <span class="stat-label" x-text="$store.i18n.t('versionControl.currentBranch')"></span>
                        <span class="stat-value" x-text="$store.versionControl.currentBranch || 'main'"></span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" x-text="$store.i18n.t('versionControl.totalCommits')"></span>
                        <span class="stat-value" x-text="($store.project.getCommitHistory() || []).length"></span>
                    </div>
                </div>
                
                <div class="version-history" x-data="versionHistoryComponent()">
                    <template x-if="historyData && historyData.length > 0">
                        <template x-for="commit in historyData" :key="commit.id">
                            <div class="version-item" @click="checkoutCommit(commit.id)">
                                <div class="version-header">
                                    <div class="version-number" x-text="'Commit: ' + commit.id.substring(0, 8)"></div>
                                    <div class="version-actions">
                                        <button class="btn btn-sm btn-secondary" 
                                                @click.stop="checkoutCommit(commit.id)"
                                                x-text="$store.i18n.t('common.view')">
                                        </button>
                                    </div>
                                </div>
                                <div class="version-details">
                                    <div class="version-author" x-text="'Autor: ' + commit.author"></div>
                                    <div class="version-date" x-text="'Fecha: ' + new Date(commit.timestamp).toLocaleString()"></div>
                                    <div class="version-message" x-text="'Mensaje: ' + commit.message"></div>
                                </div>
                            </div>
                        </template>
                    </template>
                    
                    <div x-show="(!historyData || historyData.length === 0)" class="empty-state">
                        <p x-text="$store.i18n.t('versionControl.emptyHistory') || 'No hay commits en esta rama'"></p>
                        <p class="empty-state-hint" x-text="$store.i18n.t('versionControl.emptyStateHint') || 'Puedes crear un commit usando el botÃ³n de commit en la cabecera'"></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" @click="$store.ui.closeModal('versionHistory')" 
                    x-text="$store.i18n.t('common.close')"></button>
        </div>
    </div>
</div>